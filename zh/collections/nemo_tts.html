

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>NeMo TTS collection &mdash; nemo 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NeMo NLP collection" href="nemo_nlp.html" />
    <link rel="prev" title="NeMo ASR collection" href="nemo_asr.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> nemo
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/intro.html">从这里开始</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training.html">快速训练</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asr/intro.html">语音识别</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech_command/intro.html">语音指令</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/intro.html">自然语言处理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tts/intro.html">语音合成</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">NeMo Collections API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="core.html">NeMo Common Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="nemo_asr.html">NeMo ASR collection</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">NeMo TTS collection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-nemo.collections.tts.data_layers">语音数据处理模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-nemo.collections.tts.tacotron2_modules">Tacotron 2 模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-nemo.collections.tts.waveglow_modules">Waveglow 模块</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="nemo_nlp.html">NeMo NLP collection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api-docs/modules.html">NeMo API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">nemo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">NeMo Collections API</a> &raquo;</li>
        
      <li>NeMo TTS collection</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/collections/nemo_tts.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nemo-tts-collection">
<h1>NeMo TTS collection<a class="headerlink" href="#nemo-tts-collection" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-nemo.collections.tts.data_layers">
<span id="id1"></span><h2>语音数据处理模块<a class="headerlink" href="#module-nemo.collections.tts.data_layers" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="nemo.collections.tts.data_layers.AudioDataLayer">
<em class="property">class </em><code class="sig-prename descclassname">nemo.collections.tts.data_layers.</code><code class="sig-name descname">AudioDataLayer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">manifest_filepath</span></em>, <em class="sig-param"><span class="n">batch_size</span></em>, <em class="sig-param"><span class="n">sample_rate</span></em>, <em class="sig-param"><span class="n">min_duration</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">max_duration</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">trim_silence</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">drop_last</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">shuffle</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">num_workers</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">n_segments</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nemo/collections/tts/data_layers.html#AudioDataLayer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nemo.collections.tts.data_layers.AudioDataLayer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../api-docs/nemo.html#nemo.backends.pytorch.nm.DataLayerNM" title="nemo.backends.pytorch.nm.DataLayerNM"><code class="xref py py-class docutils literal notranslate"><span class="pre">nemo.backends.pytorch.nm.DataLayerNM</span></code></a></p>
<p>Data Layer for general speech tasks that loads only the audio.</p>
<p>Module which reads speech data. It accepts comma-separated
JSON manifest files describing the wav audio files and their metadata.
JSON files should be of the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;audio_filepath&quot;</span><span class="p">:</span> <span class="n">path_to_wav_0</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="n">time_in_sec_0</span><span class="p">}</span>
<span class="o">...</span>
<span class="p">{</span><span class="s2">&quot;audio_filepath&quot;</span><span class="p">:</span> <span class="n">path_to_wav_n</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="n">time_in_sec_n</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifest_filepath</strong> (<em>str</em>) – path to JSON containing data.</p></li>
<li><p><strong>batch_size</strong> (<em>int</em>) – batch sizelse.</p></li>
<li><p><strong>min_duration</strong> (<em>float</em>) – All training files which have a duration less
than min_duration are dropped. Note: Duration is read from the
manifest JSON.
Defaults to 0.1.</p></li>
<li><p><strong>max_duration</strong> (<em>float</em>) – All training files which have a duration more
than max_duration are dropped. Note: Duration is read from the
manifest JSON.
Defaults to None.</p></li>
<li><p><strong>trim_silence</strong> (<em>bool</em>) – Whether to use trim silence from beginning and end
of audio signal using librosa.effects.trim().
Defaults to False.</p></li>
<li><p><strong>drop_last</strong> (<em>bool</em>) – See PyTorch DataLoader.
Defaults to False.</p></li>
<li><p><strong>shuffle</strong> (<em>bool</em>) – See PyTorch DataLoader.
Defaults to True.</p></li>
<li><p><strong>num_workers</strong> (<em>int</em>) – See PyTorch DataLoader.
Defaults to 0.</p></li>
<li><p><strong>n_segments</strong> (<em>int</em>) – Number of samples to load per audiofile.
Defaults to 0 which indicates to load the whole file.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="nemo.collections.tts.data_layers.AudioDataLayer.data_iterator">
<em class="property">property </em><code class="sig-name descname">data_iterator</code><a class="headerlink" href="#nemo.collections.tts.data_layers.AudioDataLayer.data_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>“Iterator over the dataset. It is a good idea to return
torch.utils.data.DataLoader here. Should implement either this or
<cite>dataset</cite>.
If this is implemented, <cite>dataset</cite> property should return None.</p>
</dd></dl>

<dl class="py method">
<dt id="nemo.collections.tts.data_layers.AudioDataLayer.dataset">
<em class="property">property </em><code class="sig-name descname">dataset</code><a class="headerlink" href="#nemo.collections.tts.data_layers.AudioDataLayer.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Should return an instance of torch.utils.data.Dataset. Should
implement
either this or <cite>data_iterator</cite>. If this is implemented, <cite>data_iterator</cite>
should return None.</p>
</dd></dl>

<dl class="py method">
<dt id="nemo.collections.tts.data_layers.AudioDataLayer.output_ports">
<em class="property">property </em><code class="sig-name descname">output_ports</code><a class="headerlink" href="#nemo.collections.tts.data_layers.AudioDataLayer.output_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns definitions of module output ports.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nemo.collections.tts.tacotron2_modules">
<span id="tacotron-2"></span><h2>Tacotron 2 模块<a class="headerlink" href="#module-nemo.collections.tts.tacotron2_modules" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="nemo.collections.tts.tacotron2_modules.MakeGate">
<em class="property">class </em><code class="sig-prename descclassname">nemo.collections.tts.tacotron2_modules.</code><code class="sig-name descname">MakeGate</code><a class="reference internal" href="../_modules/nemo/collections/tts/tacotron2_modules.html#MakeGate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nemo.collections.tts.tacotron2_modules.MakeGate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../api-docs/nemo.html#nemo.backends.pytorch.nm.NonTrainableNM" title="nemo.backends.pytorch.nm.NonTrainableNM"><code class="xref py py-class docutils literal notranslate"><span class="pre">nemo.backends.pytorch.nm.NonTrainableNM</span></code></a></p>
<p>MakeGate is a helper Neural Module that makes the target stop value.</p>
<dl class="py method">
<dt id="nemo.collections.tts.tacotron2_modules.MakeGate.input_ports">
<em class="property">property </em><code class="sig-name descname">input_ports</code><a class="headerlink" href="#nemo.collections.tts.tacotron2_modules.MakeGate.input_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns definitions of module input ports.</p>
<ul class="simple">
<li><p><em>target_len</em> : axes: (batch,); elements_type: LengthsType</p></li>
<li><p><em>mel_target</em> : axes: (batch, dimension, time); elements_type: MelSpectrogramType</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt id="nemo.collections.tts.tacotron2_modules.MakeGate.output_ports">
<em class="property">property </em><code class="sig-name descname">output_ports</code><a class="headerlink" href="#nemo.collections.tts.tacotron2_modules.MakeGate.output_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns definitions of module output ports.</p>
<ul class="simple">
<li><p><em>gate_target</em> : axes: (batch, time); elements_type: ChannelType</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="nemo.collections.tts.tacotron2_modules.Tacotron2Loss">
<em class="property">class </em><code class="sig-prename descclassname">nemo.collections.tts.tacotron2_modules.</code><code class="sig-name descname">Tacotron2Loss</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pad_value</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">- 11.52</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nemo/collections/tts/tacotron2_modules.html#Tacotron2Loss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nemo.collections.tts.tacotron2_modules.Tacotron2Loss" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../api-docs/nemo.html#nemo.backends.pytorch.nm.LossNM" title="nemo.backends.pytorch.nm.LossNM"><code class="xref py py-class docutils literal notranslate"><span class="pre">nemo.backends.pytorch.nm.LossNM</span></code></a></p>
<p>Tacoton2Loss implements the loss function of Tacotron 2. The loss function
is the mean squared error between the reference mel spectrogram and the
mel spectrogram predicted by the decoder + the mean squared error between
the reference mel spectrogram and the mel spectrogram predicted by the
post net + the cross entropy error between the stop values and the
reference mel length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pad_value</strong> (<em>float</em>) – In the evaluation case, when we don’t use teacher
forcing, if the generated mel is shorter than the reference mel,
we pad the generated mel with this value. Default is ~log(1e-5).</p>
</dd>
</dl>
<dl class="py method">
<dt id="nemo.collections.tts.tacotron2_modules.Tacotron2Loss.input_ports">
<em class="property">property </em><code class="sig-name descname">input_ports</code><a class="headerlink" href="#nemo.collections.tts.tacotron2_modules.Tacotron2Loss.input_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns definitions of module input ports.</p>
<ul class="simple">
<li><p><em>mel_out</em> : axes: (batch, dimension, time); elements_type: MelSpectrogramType</p></li>
<li><p><em>mel_out_postnet</em> : axes: (batch, dimension, time); elements_type: MelSpectrogramType</p></li>
<li><p><em>gate_out</em> : axes: (batch, time); elements_type: ChannelType</p></li>
<li><p><em>mel_target</em> : axes: (batch, dimension, time); elements_type: MelSpectrogramType</p></li>
<li><p><em>gate_target</em> : axes: (batch, time); elements_type: ChannelType</p></li>
<li><p><em>target_len</em> : axes: (batch,); elements_type: LengthsType</p></li>
<li><p><em>seq_len</em> : axes: (batch,); elements_type: LengthsType</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt id="nemo.collections.tts.tacotron2_modules.Tacotron2Loss.output_ports">
<em class="property">property </em><code class="sig-name descname">output_ports</code><a class="headerlink" href="#nemo.collections.tts.tacotron2_modules.Tacotron2Loss.output_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns definitions of module output ports.</p>
<ul class="simple">
<li><p><em>loss</em> : axes: None; elements_type: LossType</p></li>
</ul>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nemo.collections.tts.waveglow_modules">
<span id="waveglow"></span><h2>Waveglow 模块<a class="headerlink" href="#module-nemo.collections.tts.waveglow_modules" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="nemo.collections.tts.waveglow_modules.WaveGlowLoss">
<em class="property">class </em><code class="sig-prename descclassname">nemo.collections.tts.waveglow_modules.</code><code class="sig-name descname">WaveGlowLoss</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sample_rate</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">sigma</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nemo/collections/tts/waveglow_modules.html#WaveGlowLoss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nemo.collections.tts.waveglow_modules.WaveGlowLoss" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../api-docs/nemo.html#nemo.backends.pytorch.nm.LossNM" title="nemo.backends.pytorch.nm.LossNM"><code class="xref py py-class docutils literal notranslate"><span class="pre">nemo.backends.pytorch.nm.LossNM</span></code></a></p>
<p>WaveGlowLoss implements the waveglow loss which aims to maximize the
log-likelihood of the audio given the mel spectrogram. This loss is
expressed as the log-likelihood of a standard normal distribution and the
sum of the log of the determinant of the Jacobians of the mapping from
x, audio, to z, the normal distribution. The second term can be further
split in the contribution by the affine coupling layer, log_s, and the 1x1
invertible convolution layer, log_det_W.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sigma</strong> (<em>float</em>) – Standard deviation of the normal distribution that we
are aiming to model.
Defaults to 1.</p>
</dd>
</dl>
<dl class="py method">
<dt id="nemo.collections.tts.waveglow_modules.WaveGlowLoss.input_ports">
<em class="property">property </em><code class="sig-name descname">input_ports</code><a class="headerlink" href="#nemo.collections.tts.waveglow_modules.WaveGlowLoss.input_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns definitions of module input ports.</p>
</dd></dl>

<dl class="py method">
<dt id="nemo.collections.tts.waveglow_modules.WaveGlowLoss.output_ports">
<em class="property">property </em><code class="sig-name descname">output_ports</code><a class="headerlink" href="#nemo.collections.tts.waveglow_modules.WaveGlowLoss.output_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns definitions of module output ports.</p>
<ul class="simple">
<li><p><em>loss</em> : axes: None; elements_type: LossType</p></li>
</ul>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nemo_nlp.html" class="btn btn-neutral float-right" title="NeMo NLP collection" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nemo_asr.html" class="btn btn-neutral float-left" title="NeMo ASR collection" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2020, NVIDIA

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>